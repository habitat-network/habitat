# https://moonrepo.dev/docs/config/tasks
$schema: "https://moonrepo.dev/schemas/tasks.json"

# https://moonrepo.dev/docs/config/project#tasks
tasks:
  format:
    command: "gofmt -w ."
  build:
    command: "go build"
    args:
      - '-o'
      - '@out(0)'
    outputs:
      - "/bin/$project"
    options:
      cache: false
  test:
    command: "go test ./..."
    options:
      cache: false
  tidy-deps:
    command: "go mod tidy"
    options:
      cache: false
  run:
    command: "$workspaceRoot/bin/$project"
    deps:
      - '~:build'
    local: true
    options:
      envFile:
        - '/dev.env'
